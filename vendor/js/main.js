(canvas=document.querySelector("canvas")).width=canvas.offsetWidth,canvas.height=canvas.offsetHeight,console.log("aa ",canvas);var canvas,coor={x:0,y:400},pos={x:0,y:150},ctx=canvas.getContext("2d"),center={x:canvas.width/2,y:canvas.height/2,deg:0,scale:5/1506*canvas.width};function drawFibonacciSpiral(t,e){var a=0,r=center.deg||0;function n(){ctx.clearRect(0,0,canvas.width,canvas.height),(a+=.1)<=12&&(window.requestAnimationFrame(n),drawStroke(getSpiral(t,e,a,center.scale),center,"rgba(255,0,0,0.9)",13-a))}ctx.translate(center.x,center.y),ctx.rotate(r*Math.PI/180),ctx.translate(-center.x,-center.y),window.requestAnimationFrame(n)}function getDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function getAngle(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function drawStroke(t,e,a,r){var n=t[0];r=r||1;e=e||{x:0,y:0},a=a||"black",ctx.strokeStyle=a,ctx.lineWidth=r,ctx.beginPath(),ctx.moveTo(e.x+n.x,e.y+n.y);for(var c=1;c<t.length;c++)n=t[c],ctx.lineTo(e.x+n.x,e.y+n.y);ctx.stroke(),ctx.closePath()}function FibonacciGenerator(){var c=this;return c.array=[0,1,2],c.getDiscrete=function(t){for(;t>=c.array.length;){var e=c.array.length,a=c.array[e-1]+c.array[e-2];c.array.push(a)}return c.array[t]},c.getNumber=function(t){var e=Math.floor(t),a=Math.ceil(t);if(Math.floor(t)==t)return c.getDiscrete(t);var r=Math.pow(t-e,1.15),n=c.getDiscrete(e);return n+r*(c.getDiscrete(a)-n)},c}function getSpiral(t,e,a,r){for(var n=500,c=12-(a||0),o=12,i=(r=r||.5,getAngle(t,e)),s=(getDistance(t,e),new FibonacciGenerator),h=(s.getNumber(o),i-o*Math.PI/2),x=[],g=c*n;g<=o*n;g++){a=g/n;var l=s.getNumber(a),u=a*Math.PI/2,y={x:r*l*Math.cos(u+h)+t.x,y:r*l*Math.sin(u+h)+t.y};x.push(y)}return x}drawFibonacciSpiral(pos,coor),(canvas=document.querySelector("canvas")).width=canvas.offsetWidth,canvas.height=canvas.offsetHeight,console.log("aa ",canvas);coor={x:0,y:400},pos={x:0,y:150},ctx=canvas.getContext("2d"),center={x:canvas.width/2,y:canvas.height/2,deg:0,scale:5/1506*canvas.width};function drawFibonacciSpiral(e,a){var r=0,t=center.deg||0;ctx.translate(center.x,center.y),ctx.rotate(t*Math.PI/180),ctx.translate(-center.x,-center.y),window.requestAnimationFrame(function t(){ctx.clearRect(0,0,canvas.width,canvas.height),(r+=.1)<=12&&(window.requestAnimationFrame(t),drawStroke(getSpiral(e,a,r,center.scale),center,"rgba(255,0,0,0.9)",13-r))})}function getDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function getAngle(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function drawStroke(t,e,a,r){var n=t[0];r=r||1,e=e||{x:0,y:0},a=a||"black",ctx.strokeStyle=a,ctx.lineWidth=r,ctx.beginPath(),ctx.moveTo(e.x+n.x,e.y+n.y);for(var c=1;c<t.length;c++)n=t[c],ctx.lineTo(e.x+n.x,e.y+n.y);ctx.stroke(),ctx.closePath()}function FibonacciGenerator(){var c=this;return c.array=[0,1,2],c.getDiscrete=function(t){for(;t>=c.array.length;){var e=c.array.length,a=c.array[e-1]+c.array[e-2];c.array.push(a)}return c.array[t]},c.getNumber=function(t){var e=Math.floor(t),a=Math.ceil(t);if(Math.floor(t)==t)return c.getDiscrete(t);var r=Math.pow(t-e,1.15),n=c.getDiscrete(e);return n+r*(c.getDiscrete(a)-n)},c}function getSpiral(t,e,a,r){for(var n=12-(a||0),c=(r=r||.5,getAngle(t,e)),o=(getDistance(t,e),new FibonacciGenerator),i=(o.getNumber(12),c-12*Math.PI/2),s=[],h=500*n;h<=6e3;h++){a=h/500;var x=o.getNumber(a),g=a*Math.PI/2,l={x:r*x*Math.cos(g+i)+t.x,y:r*x*Math.sin(g+i)+t.y};s.push(l)}return s}drawFibonacciSpiral(pos,coor);